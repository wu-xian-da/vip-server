<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jianfei.core.mapper.AppAirportTransMapper">
	<resultMap id="BaseResultMap" type="com.jianfei.core.bean.AppAirportTrans">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		<id column="id" property="id" jdbcType="VARCHAR" />
		<result column="phone" property="phone" jdbcType="VARCHAR" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="airport_id" property="airportId" jdbcType="VARCHAR" />
		<result column="airport_name" property="airportName" jdbcType="VARCHAR" />
		<result column="flight_lou" property="flightLou" jdbcType="VARCHAR" />
		<result column="flight_num" property="flightNum" jdbcType="VARCHAR" />
		<result column="flight_date" property="flightDate" jdbcType="TIMESTAMP" />
		<result column="number_peers" property="numberPeers" jdbcType="INTEGER" />
		<result column="gooff_date" property="gooffDate" jdbcType="TIMESTAMP" />
		<result column="pid" property="pid" jdbcType="VARCHAR" />
		<result column="pname" property="pname" jdbcType="VARCHAR" />
		<result column="sid" property="sid" jdbcType="VARCHAR" />
		<result column="sname" property="sname" jdbcType="VARCHAR" />
		<result column="cid" property="cid" jdbcType="VARCHAR" />
		<result column="cname" property="cname" jdbcType="VARCHAR" />
		<result column="detail_address" property="detailAddress"
			jdbcType="VARCHAR" />
		<result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
		<result column="pickup_type" property="pickupType" jdbcType="INTEGER" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
		<result column="submit" property="submit" jdbcType="INTEGER" />
		<result column="deal_id" property="dealId" jdbcType="INTEGER" />
		<result column="update_date" property="updateDate" jdbcType="TIMESTAMP" />
		<result column="card_no" property="cardNo" jdbcType="VARCHAR" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		id, phone, name, airport_id, airport_name, flight_lou, flight_num,
		flight_date, number_peers,
		gooff_date, pid, pname, sid, sname, cid,
		cname, detail_address, create_date,
		pickup_type,
		remark, submit,
		deal_id, update_date,card_no
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		select
		<include refid="Base_Column_List" />
		from app_airport_trans
		where id = #{id,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		delete from app_airport_trans
		where id = #{id,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.jianfei.core.bean.AppAirportTrans">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		insert into app_airport_trans (id, phone, name,
		airport_id,
		airport_name, flight_lou,
		flight_num, flight_date, number_peers,
		gooff_date, pid, pname,
		sid, sname, cid, cname,
		detail_address,
		create_date, pickup_type,
		remark, submit, deal_id,
		update_date)
		values
		(#{id,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR},
		#{name,jdbcType=VARCHAR},
		#{airportId,jdbcType=VARCHAR},
		#{airportName,jdbcType=VARCHAR}, #{flightLou,jdbcType=VARCHAR},
		#{flightNum,jdbcType=VARCHAR}, #{flightDate,jdbcType=TIMESTAMP},
		#{numberPeers,jdbcType=INTEGER},
		#{gooffDate,jdbcType=TIMESTAMP},
		#{pid,jdbcType=VARCHAR}, #{pname,jdbcType=VARCHAR},
		#{sid,jdbcType=VARCHAR}, #{sname,jdbcType=VARCHAR},
		#{cid,jdbcType=VARCHAR}, #{cname,jdbcType=VARCHAR},
		#{detailAddress,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP},
		#{pickupType,jdbcType=INTEGER},
		#{remark,jdbcType=VARCHAR},
		#{submit,jdbcType=INTEGER}, #{dealId,jdbcType=INTEGER},
		#{updateDate,jdbcType=TIMESTAMP})
	</insert>
	<insert id="insertSelective" parameterType="com.jianfei.core.bean.AppAirportTrans">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		insert into app_airport_trans
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="phone != null">
				phone,
			</if>
			<if test="name != null">
				name,
			</if>
			<if test="airportId != null">
				airport_id,
			</if>
			<if test="airportName != null">
				airport_name,
			</if>
			<if test="flightLou != null">
				flight_lou,
			</if>
			<if test="flightNum != null">
				flight_num,
			</if>
			<if test="flightDate != null">
				flight_date,
			</if>
			<if test="numberPeers != null">
				number_peers,
			</if>
			<if test="gooffDate != null">
				gooff_date,
			</if>
			<if test="pid != null">
				pid,
			</if>
			<if test="pname != null">
				pname,
			</if>
			<if test="sid != null">
				sid,
			</if>
			<if test="sname != null">
				sname,
			</if>
			<if test="cid != null">
				cid,
			</if>
			<if test="cname != null">
				cname,
			</if>
			<if test="detailAddress != null">
				detail_address,
			</if>
			<if test="createDate != null">
				create_date,
			</if>
			<if test="pickupType != null">
				pickup_type,
			</if>
			<if test="remark != null">
				remark,
			</if>
			<if test="submit != null">
				submit,
			</if>
			<if test="dealId != null">
				deal_id,
			</if>
			<if test="updateDate != null">
				update_date,
			</if>
			<if test="cardNo != null">
				card_no,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="phone != null">
				#{phone,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				#{name,jdbcType=VARCHAR},
			</if>
			<if test="airportId != null">
				#{airportId,jdbcType=VARCHAR},
			</if>
			<if test="airportName != null">
				#{airportName,jdbcType=VARCHAR},
			</if>
			<if test="flightLou != null">
				#{flightLou,jdbcType=VARCHAR},
			</if>
			<if test="flightNum != null">
				#{flightNum,jdbcType=VARCHAR},
			</if>
			<if test="flightDate != null">
				#{flightDate,jdbcType=TIMESTAMP},
			</if>
			<if test="numberPeers != null">
				#{numberPeers,jdbcType=INTEGER},
			</if>
			<if test="gooffDate != null">
				#{gooffDate,jdbcType=TIMESTAMP},
			</if>
			<if test="pid != null">
				#{pid,jdbcType=VARCHAR},
			</if>
			<if test="pname != null">
				#{pname,jdbcType=VARCHAR},
			</if>
			<if test="sid != null">
				#{sid,jdbcType=VARCHAR},
			</if>
			<if test="sname != null">
				#{sname,jdbcType=VARCHAR},
			</if>
			<if test="cid != null">
				#{cid,jdbcType=VARCHAR},
			</if>
			<if test="cname != null">
				#{cname,jdbcType=VARCHAR},
			</if>
			<if test="detailAddress != null">
				#{detailAddress,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				#{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="pickupType != null">
				#{pickupType,jdbcType=INTEGER},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
			<if test="submit != null">
				#{submit,jdbcType=INTEGER},
			</if>
			<if test="dealId != null">
				#{dealId,jdbcType=INTEGER},
			</if>
			<if test="updateDate != null">
				#{updateDate,jdbcType=TIMESTAMP},
			</if>
			<if test="cardNo != null">
				#{cardNo,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.jianfei.core.bean.AppAirportTrans">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		update app_airport_trans
		<set>
			<if test="phone != null">
				phone = #{phone,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				name = #{name,jdbcType=VARCHAR},
			</if>
			<if test="airportId != null">
				airport_id = #{airportId,jdbcType=VARCHAR},
			</if>
			<if test="airportName != null">
				airport_name = #{airportName,jdbcType=VARCHAR},
			</if>
			<if test="flightLou != null">
				flight_lou = #{flightLou,jdbcType=VARCHAR},
			</if>
			<if test="flightNum != null">
				flight_num = #{flightNum,jdbcType=VARCHAR},
			</if>
			<if test="flightDate != null">
				flight_date = #{flightDate,jdbcType=TIMESTAMP},
			</if>
			<if test="numberPeers != null">
				number_peers = #{numberPeers,jdbcType=INTEGER},
			</if>
			<if test="gooffDate != null">
				gooff_date = #{gooffDate,jdbcType=TIMESTAMP},
			</if>
			<if test="pid != null">
				pid = #{pid,jdbcType=VARCHAR},
			</if>
			<if test="pname != null">
				pname = #{pname,jdbcType=VARCHAR},
			</if>
			<if test="sid != null">
				sid = #{sid,jdbcType=VARCHAR},
			</if>
			<if test="sname != null">
				sname = #{sname,jdbcType=VARCHAR},
			</if>
			<if test="cid != null">
				cid = #{cid,jdbcType=VARCHAR},
			</if>
			<if test="cname != null">
				cname = #{cname,jdbcType=VARCHAR},
			</if>
			<if test="detailAddress != null">
				detail_address = #{detailAddress,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				create_date = #{createDate,jdbcType=TIMESTAMP},
			</if>
			<if test="pickupType != null">
				pickup_type = #{pickupType,jdbcType=INTEGER},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
			<if test="submit != null">
				submit = #{submit,jdbcType=INTEGER},
			</if>
			<if test="dealId != null">
				deal_id = #{dealId,jdbcType=INTEGER},
			</if>
			<if test="updateDate != null">
				update_date = #{updateDate,jdbcType=TIMESTAMP},
			</if>
		</set>
		where id = #{id,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.jianfei.core.bean.AppAirportTrans">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05 
			17:33:20 CST 2016. -->
		update app_airport_trans
		set phone = #{phone,jdbcType=VARCHAR},
		name =
		#{name,jdbcType=VARCHAR},
		airport_id = #{airportId,jdbcType=VARCHAR},
		airport_name = #{airportName,jdbcType=VARCHAR},
		flight_lou =
		#{flightLou,jdbcType=VARCHAR},
		flight_num =
		#{flightNum,jdbcType=VARCHAR},
		flight_date =
		#{flightDate,jdbcType=TIMESTAMP},
		number_peers =
		#{numberPeers,jdbcType=INTEGER},
		gooff_date =
		#{gooffDate,jdbcType=TIMESTAMP},
		pid = #{pid,jdbcType=VARCHAR},
		pname =
		#{pname,jdbcType=VARCHAR},
		sid = #{sid,jdbcType=VARCHAR},
		sname =
		#{sname,jdbcType=VARCHAR},
		cid = #{cid,jdbcType=VARCHAR},
		cname =
		#{cname,jdbcType=VARCHAR},
		detail_address =
		#{detailAddress,jdbcType=VARCHAR},
		create_date =
		#{createDate,jdbcType=TIMESTAMP},
		pickup_type =
		#{pickupType,jdbcType=INTEGER},
		remark = #{remark,jdbcType=VARCHAR},
		submit = #{submit,jdbcType=INTEGER},
		deal_id =
		#{dealId,jdbcType=INTEGER},
		update_date =
		#{updateDate,jdbcType=TIMESTAMP}
		where id = #{id,jdbcType=VARCHAR}
	</update>

	<!-- 更具查询条件查找接送机信息列表 addedd by bbli -->
	<select id="mapList" parameterType="java.util.Map" resultType="java.util.Map">
		<![CDATA[SELECT 
					  `id`,
					  `phone`,
					  `name`,
					  `airport_id`,
					  `airport_name`,
					  `flight_lou`,
					  `flight_num`,
					   DATE_FORMAT(flight_date,'%Y-%m-%d') AS flight_date,
					  `number_peers`,
					   DATE_FORMAT(gooff_date,'%Y-%m-%d %T') AS gooff_date,
					  `pid`,
					  `pname`,
					  `sid`,
					  `sname`,
					  `cid`,
					  `cname`,
					  `detail_address`,
					  `create_date`,
					  `pickup_type`,
					  `remark`,
					  `submit`,
					   `submit` as action, 
					  `deal_id`,
					  `update_date` 
					FROM
					 app_airport_trans aat
		]]>
		<where>
			<if test="submit!=null and submit!=''">
				aat.submit=#{submit}
			</if>
			<if test="pickup_type!=null and pickup_type!=''">
				and aat.pickup_type=#{pickup_type}
			</if>
			<if test="nameandphone!=null and nameandphone!=''">
				and ( name like CONCAT('%', #{nameandphone}, '%') or phone like CONCAT('%', #{nameandphone}, '%'))
			</if>
		</where>
		<if test="sort==null or sort==''">
			ORDER BY aat.`flight_date` DESC ,aat.`gooff_date` DESC
		</if>
		<if test="sort!=null">
			order by ${sort} ${order}
		</if>
	</select>
	<select id="pickupLook"  resultType="java.util.Map" parameterType="String">
		<![CDATA[
			SELECT
				cu.customer_id,
				aat.name,
				CASE
			WHEN sex = 0 THEN
				'女'
			ELSE
				'男'
			END AS sex,
			card_no,
			 `customer_phone`,
			 aat.id,
			 aat.airport_name,
			 aat.flight_lou,
			 aat.flight_num,
			 DATE_FORMAT( aat.flight_date,'%Y-%m-%d') as flight_date,
			 DATE_FORMAT( aat.gooff_date,'%Y-%m-%d %H:%i') as gooff_date,
			 aat.number_peers,
			 aat.pname,
			 aat.sname,
			 aat.cname,
			 aat.detail_address,
			 aat.pickup_type
			FROM
				app_airport_trans aat
			inner JOIN app_customer cu ON aat.phone = cu.customer_phone 
			where  aat.id=#{id}
		]]>
	</select>
	<!-- 更改接送机状态  addedd by bbli -->
	<update id="updateState" parameterType="java.util.Map">
		<![CDATA[
			UPDATE `app_airport_trans` aat SET aat.`submit`=#{submit} WHERE aat.`id`=#{id}
		]]>
	</update>


	<select id="selectByPhone" resultMap="BaseResultMap"
			parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify. This element was generated on Tue Jul 05
			17:33:20 CST 2016. -->
		select
		<include refid="Base_Column_List" />
		from app_airport_trans
		where phone = #{phone,jdbcType=VARCHAR} AND card_no=#{cardNo,jdbcType=VARCHAR}
	</select>
</mapper>