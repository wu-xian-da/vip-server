<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jianfei.core.mapper.AppOrderCardMapper" >

  <resultMap id="BaseResultMap" type="com.jianfei.core.bean.AppOrderCard" >
    <result column="card_id" property="cardNo"/>
    <result column="init_money" property="initMoney"/>
  </resultMap>


  <resultMap id="VipResultMap" type="com.jianfei.core.dto.VipCardUseDetailInfo" >
    <result column="card_id" property="vipCardNo"  jdbcType="VARCHAR"/>
    <result column="pay_money" property="orderMoney"  jdbcType="REAL"/>
    <result column="activat_time" property="activeTime"  jdbcType="TIMESTAMP"/>
    <result column="customer_name" property="customerName"  jdbcType="VARCHAR"/>
    <result column="customer_phone" property="customerPhone"  jdbcType="VARCHAR"/>
    <result column="customer_identi" property="customerIdNo"  jdbcType="VARCHAR"/>
  </resultMap>

  <!--订单列表信息展示  -->
  <select id="getAppOrderCard" resultMap="BaseResultMap" parameterType="java.lang.String">
  		select card_id,init_money from  app_order_card where order_id=#{orderId}
  </select>

  <!-- Vip使用记录相关查询  -->
  <select id="getVipCardUseDetailInfo" resultMap="VipResultMap" parameterType="java.lang.String">
   SELECT c.card_id,o.pay_money,o.activat_time,u.customer_name,u.customer_phone,u.customer_identi  FROM app_orders o JOIN app_order_card c
   ON o.order_id=c.card_id JOIN app_customer u ON o.customer_id=u.customer_id WHERE u.customer_phone=#{customerPhone}
  </select>

</mapper>